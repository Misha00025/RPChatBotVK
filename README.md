# RPChatBotVK

Чат-бот для ролевых игр в ВК

Разделы:
- [RPChatBotVK](#rpchatbotvk)
- [Возможности бота](#возможности-бота)
  - [Основные](#основные)
  - [Серверные](#серверные)
- [Установка и запуск](#установка-и-запуск)
  - [Ручная установка](#ручная-установка)
  - [Через docker-compose](#через-docker-compose)
- [Конфигурация](#конфигурация)
  - [Основная конфигурация (config.ini)](#основная-конфигурация-configini)
    - [Раздел DEFAULT](#раздел-default)
    - [Раздел API](#раздел-api)
    - [Раздел VK](#раздел-vk)

# Возможности бота

Данный бот предназначен для помощи в ведении ролевых игр в социальной сети VK. Для этой цели он предоставляет две категории возможностей: основные и серверные.

## Основные 

Основные возможности бота - это такие возможности, которые он может выполнять без настройки и подключения дополнительного сервера.

Основные возможности бота включают:
1. Команды броска кубов;
2. Разделение игроков на игровые зоны (локации);
3. Псевдонимы.

## Серверные

Серверные возможности - это такие возможности, которые требуют наличия дополнительного сервера. 

**Зачем нужен этот сервер?** 
- Сервер используется для единого хранения и обработки данных. Наличие сервера представляет возможность использования этих данных не только в боте, но и в других программах. Так у меня разрабатывается второй проект, который представляет сервер обработки и веб-интерфейс для доступа к сохранённым на сервере данным. Ссылка на второй проект: https://github.com/Misha00025/TheDungeonNotebook.

Наличие сервера открывает возможность для следующих функций:
- Создание заметок;
- Работа с кошельком;
- Работа с инвентарём. 

# Установка и запуск

Вы можете развернуть бота с помощью одного из этих способов: <br/>
[Ручная установка](#ручная-установка)<br/>
[Через Docker](#через-docker)<br/>
[Через docker-compose](#через-docker-compose)<br/>

## Ручная установка

Чтобы установить бота вы можете скачать данный репозиторий на свой компьютер командой:

```bash
git clone https://github.com/Misha00025/RPChatBotVK.git 
```

Перейти в папку RPChatBotVK:

```bash
cd RPChatBotVK
```

Создать виртуальное окружение:

```bash
python -m venv venv
```

Активировать его:

```bash
source venv/bin/activate
```

Установить необходимые пакеты:

```bash
pip install -r req.txt
```

Запуск бота выполняется командой:

```bash
python main.py
```

ВНИМАНИЕ: перед запуском программы убедитесь, что правильно настроили бота ([см. "Конфигурация"](#конфигурация))


## Через docker-compose

Скачайте данный репозиторий на свой компьютер командой:
```bash
git clone https://github.com/Misha00025/RPChatBotVK.git 
```

Перейти в папку RPChatBotVK:
```bash
cd RPChatBotVK
```

Дальше запустите бота, используя:
```bash
docker-compose up -d
```

После того как создадутся папки `configs`, `logs` и `saves` остановите его:
```bash
docker-compose stop
```

И перейдите к настройке ([см. "Конфигурация"](#конфигурация))

# Конфигурация

Вся настройка бота выполняется через папку `configs`. В этой папке необходимо создать 4 файла:
- config.ini - основной файл конфигурации;
- keyboard.txt - файл "клавиатуры";
- service_token.txt - файл токена для обращения к `СОД`;
- token.txt - файл токена VK 
 
## Основная конфигурация (config.ini)

В этом файле должна содержаться основная информация, необходимая для работы бота. Если вы только создали файл, скопируйте в него содержимое [default_conf.ini](https://github.com/Misha00025/RPChatBotVK/blob/master/default_config.ini). Он используется в качестве шаблона конфигурационного файла.

Конфигурационный файл разбит на несколько разделов:
- `DEFAULT` - общие настройки бота;
- `API` (опционально) - настройки работы с сервером;
- `VK` - настройки работы с VK.

### Раздел DEFAULT

Этот раздел содержит в себе:
- `LogFile` - название файла логов;
- `Listener` - откуда слушать сообщения (не используется);
- `Sender` - куда отправлять сообщения (не используется);
- `SilencePrefix` - префикс, предотвращающий пересылку сообщений;
- `KeyboardFile` - название файла с "клавиатурой", Адрес указывается относительно папки `configs`.

### Раздел API

Если **не планируете использовать** взаимодействие с сервером обработки данных, то **удалите этот раздел**.

Этот раздел содержит в себе:
- `Version` - используемая версия API `СОД`;
- `Protocol` - протокол соединения (`http` или `https`);
- `Host` - имя (или IP-адрес) хоста, на котором содержится `СОД`;
- `Port` (необязательно) - порт подключения. Если не указан, то будет использован порт выбранного протокола.
- `ServiceTokenFile` - название файла, содержащего токен подключения к `СОД`

### Раздел VK

Этот раздел содержит:
- `TokenFile` - файл, содержащий ключ доступа к группе ВК;

Для получения ключа доступа к группе ВК [см. официальную документацию ВК](https://dev.vk.com/ru/api/access-token/getting-started)